!!!5
%html
  %head
    %title Gregory McIntyre
    %meta(charset="utf-8")
    %meta(content="IE=edge,chrome=1" http-equiv="X-UA-Compatible")
    %meta{:content => "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no", :name => "viewport"}/
    %link(rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700|Alegreya+SC:400,700")
    = stylesheet_link_tag "site.css"
    = yield_content :head
    :javascript
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4659649-5']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  %body
    %header.page-header

    .page-body-and-nav
      .page-body(role="main")
        - if current_page.data.title.present?
          %h1.page-heading= current_page.data.title
        .content
          = yield
        - if paginate
          .pagination
            .current-page
              Page #{page_number} of #{num_pages}
              - if next_page
                .next-page-link.page-link= link_to 'Previous', next_page
              - if prev_page
                .previous-page-link.page-link= link_to 'Next', prev_page
        - else
          .pagination
            .current-page
              - if current_page.previous_article
                .previous-page-link.page-link= link_to 'Previous', current_page.previous_article
              - if current_page.next_article
                .next-page-link.page-link= link_to 'Next', current_page.next_article
          

      %nav.page-nav(role="navigation")
        %form.search-form(action="http://google.com/search" method="get" role="search")
          %input(type="hidden" name="q" value="site:#{settings.data.site.domain}")
          %span.search-input-span
            %input.search-input(class="search" type="text" name="q" results="0" placeholder="Search")

        %p= link_to 'Home', '/'

        %h2 Recent
        %ol
          - blog.articles[0...5].each do |article|
            %li
              = link_to article.title, article.url

        -#%h2 Tags
        -#%ol
          - blog.tags.each do |tag, articles|
            %li
              <a href="#{ tag_path tag }">#{ tag } (#{ articles.size })</a>

        %h2 By Year
        %ol
          - blog.articles.group_by {|a| a.date.year }.each do |year, articles|
            %li
              = link_to "#{year} (#{articles.size})", blog_year_path(year)

    %footer.page-footer(role="banner")
      .copyright-and-search-form
        %p.copyright
          = link_to "#{settings.data.site.title} &copy; #{Time.now.year}", '/'
